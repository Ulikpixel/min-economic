import React, { useState } from "react";
import { Label, Text } from "../../styledComponents";
import { STYLES } from "../../constains";
import { FileStyled } from "./style";

const FileForm = ({ input, meta }) => {
  const [values, setValues] = useState([]);
  const hasError = meta.error && meta.touched;

  const getValues = (e) => {
    const data = new FormData();
    const file = e.target.files[0];
    data.append("files", file);
    setValues([...values, data]);
    input.onChange(data);
  };

  return (
    <FileStyled className="file-form" error={hasError}>
      <input type="file" id="document-form" onChange={getValues} multiple />
      <Label htmlFor="document-form">
        <svg
          width="29"
          height="36"
          viewBox="0 0 30 38"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M4.45825 0.666656C2.19638 0.666656 0.333252 2.52978 0.333252 4.79166V33.2083C0.333252 35.4702 2.19638 37.3333 4.45825 37.3333H25.5416C27.8035 37.3333 29.6666 35.4702 29.6666 33.2083V13.9583C29.6665 13.5937 29.5216 13.244 29.2638 12.9862L29.2494 12.9718L17.3471 1.06949C17.0893 0.811626 16.7396 0.666727 16.3749 0.666656H4.45825ZM4.45825 3.41666H14.9999V11.2083C14.9999 13.4702 16.863 15.3333 19.1249 15.3333H26.9166V33.2083C26.9166 33.9843 26.3175 34.5833 25.5416 34.5833H4.45825C3.68229 34.5833 3.08325 33.9843 3.08325 33.2083V4.79166C3.08325 4.0157 3.68229 3.41666 4.45825 3.41666ZM17.7499 5.36099L24.9722 12.5833H19.1249C18.349 12.5833 17.7499 11.9843 17.7499 11.2083V5.36099ZM9.04159 19.9167C8.85938 19.9141 8.67848 19.9477 8.5094 20.0157C8.34032 20.0836 8.18643 20.1845 8.05667 20.3124C7.92691 20.4404 7.82387 20.5928 7.75355 20.7609C7.68322 20.929 7.647 21.1094 7.647 21.2917C7.647 21.4739 7.68322 21.6543 7.75355 21.8224C7.82387 21.9905 7.92691 22.1429 8.05667 22.2709C8.18643 22.3988 8.34032 22.4997 8.5094 22.5676C8.67848 22.6356 8.85938 22.6692 9.04159 22.6667H20.9583C21.1405 22.6692 21.3214 22.6356 21.4904 22.5676C21.6595 22.4997 21.8134 22.3988 21.9432 22.2709C22.0729 22.1429 22.176 21.9905 22.2463 21.8224C22.3166 21.6543 22.3528 21.4739 22.3528 21.2917C22.3528 21.1094 22.3166 20.929 22.2463 20.7609C22.176 20.5928 22.0729 20.4404 21.9432 20.3124C21.8134 20.1845 21.6595 20.0836 21.4904 20.0157C21.3214 19.9477 21.1405 19.9141 20.9583 19.9167H9.04159ZM9.04159 26.3333C8.85938 26.3307 8.67848 26.3644 8.5094 26.4324C8.34032 26.5003 8.18643 26.6012 8.05667 26.7291C7.92691 26.857 7.82387 27.0095 7.75355 27.1776C7.68322 27.3457 7.647 27.5261 7.647 27.7083C7.647 27.8905 7.68322 28.0709 7.75355 28.2391C7.82387 28.4072 7.92691 28.5596 8.05667 28.6875C8.18643 28.8155 8.34032 28.9163 8.5094 28.9843C8.67848 29.0522 8.85938 29.0859 9.04159 29.0833H17.2916C17.4738 29.0859 17.6547 29.0522 17.8238 28.9843C17.9929 28.9163 18.1467 28.8155 18.2765 28.6875C18.4063 28.5596 18.5093 28.4072 18.5796 28.2391C18.65 28.0709 18.6862 27.8905 18.6862 27.7083C18.6862 27.5261 18.65 27.3457 18.5796 27.1776C18.5093 27.0095 18.4063 26.857 18.2765 26.7291C18.1467 26.6012 17.9929 26.5003 17.8238 26.4324C17.6547 26.3644 17.4738 26.3307 17.2916 26.3333H9.04159Z"
            fill="#0050B2"
            fill-opacity="0.7"
          />
        </svg>
        <Text color={STYLES.blue} size="18px" weight="700">
          {values.length ? "Документ прикреплен" : "Прикрепить документ"}
        </Text>
        {values.length && (
          <Text color={STYLES.blue} weight="500">
            Количество: {values.length}
          </Text>
        )}
      </Label>
    </FileStyled>
  );
};

export default FileForm;
